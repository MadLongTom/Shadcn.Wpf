<Window x:Class="Shadcn.Wpf.Controls.ShadcnMessageDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:Shadcn.Wpf.Controls"
        Title="Message"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        Topmost="True">
    
    <Window.Resources>
        <Style x:Key="IconStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,16,0"/>
        </Style>
        
        <!-- 弹出动画 -->
        <Storyboard x:Key="ShowAnimation">
            <DoubleAnimation Storyboard.TargetName="MainBorder"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           From="0.7" To="1.0" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="MainBorder"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                           From="0.7" To="1.0" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="MainBorder"
                           Storyboard.TargetProperty="Opacity"
                           From="0.0" To="1.0" Duration="0:0:0.15"/>
        </Storyboard>
        
        <!-- 关闭动画 -->
        <Storyboard x:Key="HideAnimation">
            <DoubleAnimation Storyboard.TargetName="MainBorder"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                           From="1.0" To="0.7" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <BackEase EasingMode="EaseIn" Amplitude="0.3"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="MainBorder"
                           Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                           From="1.0" To="0.7" Duration="0:0:0.15">
                <DoubleAnimation.EasingFunction>
                    <BackEase EasingMode="EaseIn" Amplitude="0.3"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="MainBorder"
                           Storyboard.TargetProperty="Opacity"
                           From="1.0" To="0.0" Duration="0:0:0.1"/>
        </Storyboard>
    </Window.Resources>

    <!-- 外层容器，提供阴影空间 -->
    <Grid Margin="30">
        <Border x:Name="MainBorder"
                Background="{DynamicResource BackgroundBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="12"
                Padding="0"
                MinWidth="400"
                MaxWidth="600"
                RenderTransformOrigin="0.5,0.5">
            
            <Border.Effect>
                <DropShadowEffect Color="Black" 
                                Direction="270" 
                                ShadowDepth="8" 
                                BlurRadius="20" 
                                Opacity="0.3"/>
            </Border.Effect>
            
            <Border.RenderTransform>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
            </Border.RenderTransform>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0"
                    Background="{DynamicResource CardBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="0,0,0,1"
                    CornerRadius="12,12,0,0"
                    Padding="20,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Icon -->
                    <TextBlock x:Name="IconTextBlock"
                               Grid.Column="0"
                               Style="{StaticResource IconStyle}"/>
                    
                    <!-- Title -->
                    <controls:ShadcnTextBlock x:Name="TitleTextBlock"
                                            Grid.Column="1"
                                            TextSize="Heading4"
                                            VerticalAlignment="Center"/>
                    
                    <!-- Close Button -->
                    <Button x:Name="CloseButton"
                            Grid.Column="2"
                            Width="32"
                            Height="32"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="CloseButton_Click">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="Border"
                                                    Background="{TemplateBinding Background}"
                                                    CornerRadius="6">
                                                <TextBlock Text="✕"
                                                           FontSize="14"
                                                           Foreground="{DynamicResource MutedForegroundBrush}"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="Border" Property="Background" Value="{DynamicResource AccentBrush}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Border>
            
            <!-- Content -->
            <Border Grid.Row="1" Padding="20,24">
                <controls:ShadcnTextBlock x:Name="MessageTextBlock"
                                        TextWrapping="Wrap"
                                        TextSize="Default"
                                        LineHeight="1.5"/>
            </Border>
            
            <!-- Buttons -->
            <Border Grid.Row="2"
                    Background="{DynamicResource MutedBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="0,1,0,0"
                    CornerRadius="0,0,12,12"
                    Padding="20,16">
                <StackPanel x:Name="ButtonPanel"
                           Orientation="Horizontal"
                           HorizontalAlignment="Right">
                    <!-- Buttons will be added dynamically in code-behind -->
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Grid>
</Window>
