<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:system="clr-namespace:System;assembly=mscorlib"
                    xmlns:controls="clr-namespace:Shadcn.Wpf.Controls"
                    xmlns:converters="clr-namespace:Shadcn.Wpf.Converters">

    <!-- Card Template -->
    <ControlTemplate x:Key="ShadcnCardTemplate" TargetType="{x:Type controls:ShadcnCard}">
        <Border Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}"
                CornerRadius="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Header -->
                <ContentPresenter x:Name="PART_Header"
                                Grid.Row="0"
                                Content="{TemplateBinding Header}"
                                ContentTemplate="{TemplateBinding HeaderTemplate}"
                                Margin="24,24,24,12"/>
                
                <!-- Content -->
                <ContentPresenter x:Name="PART_Content"
                                Grid.Row="1"
                                Content="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                Margin="24,0,24,24"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
                
                <!-- Footer -->
                <ContentPresenter x:Name="PART_Footer"
                                Grid.Row="2"
                                Content="{TemplateBinding Footer}"
                                ContentTemplate="{TemplateBinding FooterTemplate}"
                                Margin="24"/>
            </Grid>
        </Border>
        <ControlTemplate.Triggers>
            <!-- When Header is null, hide header and give content full margin -->
            <Trigger Property="Header" Value="{x:Null}">
                <Setter TargetName="PART_Header" Property="Visibility" Value="Collapsed"/>
                <Setter TargetName="PART_Content" Property="Margin" Value="24"/>
            </Trigger>
            <!-- When Header is empty string, hide header and give content full margin -->
            <Trigger Property="Header" Value="">
                <Setter TargetName="PART_Header" Property="Visibility" Value="Collapsed"/>
                <Setter TargetName="PART_Content" Property="Margin" Value="24"/>
            </Trigger>
            <Trigger Property="Footer" Value="{x:Null}">
                <Setter TargetName="PART_Footer" Property="Visibility" Value="Collapsed"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- Default Header Template for String Header -->
    <DataTemplate x:Key="DefaultCardHeaderTemplate" DataType="{x:Type system:String}">
        <controls:ShadcnTextBlock Text="{Binding}" 
                                  TextSize="Heading4"
                                  IsEmphasized="True"
                                  Variant="Primary"/>
    </DataTemplate>

    <!-- Default Card Style -->
    <Style TargetType="{x:Type controls:ShadcnCard}">
        <Setter Property="Template" Value="{StaticResource ShadcnCardTemplate}"/>
        <Setter Property="Background" Value="{DynamicResource CardBrush}"/>
        <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Margin" Value="8"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
    </Style>

    <!-- Card Style with String Header Template -->
    <Style x:Key="ShadcnCardWithHeaderTemplate" TargetType="{x:Type controls:ShadcnCard}" BasedOn="{StaticResource {x:Type controls:ShadcnCard}}">
        <Setter Property="HeaderTemplate" Value="{StaticResource DefaultCardHeaderTemplate}"/>
    </Style>

    <!-- Card Header Template -->
    <DataTemplate x:Key="ShadcnCardHeaderTemplate">
        <StackPanel>
            <controls:ShadcnTextBlock Text="{Binding Title}" 
                      TextSize="Large"
                      IsEmphasized="True"
                      Margin="0,0,0,4"/>
            <controls:ShadcnTextBlock Text="{Binding Description}" 
                      TextSize="Small"
                      Variant="Secondary"/>
        </StackPanel>
    </DataTemplate>

    <!-- Card Footer Template -->
    <DataTemplate x:Key="ShadcnCardFooterTemplate">
        <ContentPresenter Content="{Binding}"/>
    </DataTemplate>

</ResourceDictionary>
