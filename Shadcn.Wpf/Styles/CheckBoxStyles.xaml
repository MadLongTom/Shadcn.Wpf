<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Shadcn.Wpf.Controls">

    <!-- CheckBox Template -->
    <ControlTemplate x:Key="ShadcnCheckBoxTemplate" TargetType="{x:Type controls:ShadcnCheckBox}">
        <StackPanel>
            <!-- Main CheckBox Content -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- CheckBox Visual -->
                <Border x:Name="CheckBoxBorder"
                        Grid.Column="0"
                        Width="16"
                        Height="16"
                        Background="{DynamicResource BackgroundBrush}"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="2"
                        CornerRadius="3"
                        VerticalAlignment="Top"
                        Margin="0,2,0,0">
                    
                    <Grid>
                        <!-- Check Mark -->
                        <TextBlock x:Name="CheckMark"
                                   Text="âœ“"
                                   FontFamily="{DynamicResource DefaultFontFamily}"
                                   FontSize="10"
                                   Foreground="{DynamicResource PrimaryForegroundBrush}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Visibility="Collapsed"/>
                        
                        <!-- Indeterminate Mark -->
                        <Rectangle x:Name="IndeterminateMark"
                                   Width="8"
                                   Height="2"
                                   Fill="{DynamicResource PrimaryForegroundBrush}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Visibility="Collapsed"/>
                    </Grid>
                </Border>
                
                <!-- Content -->
                <StackPanel Grid.Column="1" Margin="12,0,0,0">
                    <ContentPresenter x:Name="ContentPresenter"
                                    Content="{TemplateBinding Content}"
                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                    TextElement.Foreground="{DynamicResource ForegroundBrush}"
                                    TextElement.FontFamily="{DynamicResource DefaultFontFamily}"
                                    TextElement.FontSize="14"
                                    VerticalAlignment="Center"/>
                    
                    <!-- Description -->
                    <TextBlock x:Name="DescriptionText"
                               Text="{TemplateBinding Description}"
                               FontFamily="{DynamicResource DefaultFontFamily}"
                               FontSize="12"
                               Foreground="{DynamicResource MutedForegroundBrush}"
                               Margin="0,4,0,0"
                               TextWrapping="Wrap">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Visible"/>
                                <Style.Triggers>
                                    <Trigger Property="Text" Value="">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </Trigger>
                                    <Trigger Property="Text" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </StackPanel>
            </Grid>
        </StackPanel>
        
        <ControlTemplate.Triggers>
            <!-- Size Triggers -->
            <Trigger Property="Size" Value="Small">
                <Setter TargetName="CheckBoxBorder" Property="Width" Value="14"/>
                <Setter TargetName="CheckBoxBorder" Property="Height" Value="14"/>
                <Setter TargetName="CheckMark" Property="FontSize" Value="8"/>
                <Setter TargetName="ContentPresenter" Property="TextElement.FontSize" Value="12"/>
            </Trigger>
            <Trigger Property="Size" Value="Large">
                <Setter TargetName="CheckBoxBorder" Property="Width" Value="20"/>
                <Setter TargetName="CheckBoxBorder" Property="Height" Value="20"/>
                <Setter TargetName="CheckMark" Property="FontSize" Value="12"/>
                <Setter TargetName="ContentPresenter" Property="TextElement.FontSize" Value="16"/>
            </Trigger>
            
            <!-- State Triggers -->
            <Trigger Property="IsChecked" Value="True">
                <Setter TargetName="CheckBoxBorder" Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                <Setter TargetName="CheckBoxBorder" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
                <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
            </Trigger>
            
            <Trigger Property="IsChecked" Value="{x:Null}">
                <Setter TargetName="CheckBoxBorder" Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                <Setter TargetName="CheckBoxBorder" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
                <Setter TargetName="IndeterminateMark" Property="Visibility" Value="Visible"/>
            </Trigger>
            
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="CheckBoxBorder" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
            </Trigger>
            
            <Trigger Property="IsFocused" Value="True">
                <Setter TargetName="CheckBoxBorder" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
            </Trigger>
            
            <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="CheckBoxBorder" Property="Opacity" Value="0.5"/>
                <Setter TargetName="ContentPresenter" Property="Opacity" Value="0.5"/>
                <Setter TargetName="DescriptionText" Property="Opacity" Value="0.5"/>
            </Trigger>
            
            <Trigger Property="HasError" Value="True">
                <Setter TargetName="CheckBoxBorder" Property="BorderBrush" Value="{DynamicResource DestructiveBrush}"/>
                <Setter TargetName="DescriptionText" Property="Foreground" Value="{DynamicResource DestructiveBrush}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- Default CheckBox Style -->
    <Style TargetType="{x:Type controls:ShadcnCheckBox}">
        <Setter Property="Template" Value="{StaticResource ShadcnCheckBoxTemplate}"/>
        <Setter Property="FontFamily" Value="{DynamicResource DefaultFontFamily}"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Margin" Value="0,4"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Top"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    </Style>

</ResourceDictionary>
